(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{34:function(s,n,a){"use strict";a.r(n);var r={components:{}},e=a(2),t=Object(e.a)(r,function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("section",[a("h1",[s._v("动画")]),s._v(" "),a("p",[s._v("点击 方块。")]),s._v(" "),a("block-demo",{attrs:{tip:"",source:"function randomColor() {\n  var arrHex = [\n      '0',\n      '1',\n      '2',\n      '3',\n      '4',\n      '5',\n      '6',\n      '7',\n      '8',\n      '9',\n      'a',\n      'b',\n      'c',\n      'd',\n      'e',\n      'f'\n    ],\n    strHex = '#',\n    index\n\n  for (var i = 0; i < 6; i++) {\n    index = Math.round(Math.random() * 15)\n    strHex += arrHex[index]\n  }\n\n  return strHex\n}\n\nconst renderer = new THREE.WebGLRenderer()\nrenderer.setSize(400, 300)\ndocument.querySelector('#app').appendChild(renderer.domElement)\n\nconst scene = new THREE.Scene()\n\nconst camera = new THREE.PerspectiveCamera(45, 400 / 300, 0.1, 100)\ncamera.position.set(0, 20, 20)\ncamera.lookAt(new THREE.Vector3(0, 0, 0))\n\nconst ambientLight = new THREE.AmbientLight('#111111')\nscene.add(ambientLight)\n\nconst directionalLight = new THREE.DirectionalLight('#ffffff')\ndirectionalLight.position.set(10, 20, 10)\n\ndirectionalLight.shadow.camera.near = 1 //产生阴影的最近距离\ndirectionalLight.shadow.camera.far = 100 //产生阴影的最远距离\ndirectionalLight.shadow.camera.left = -20 //产生阴影距离位置的最左边位置\ndirectionalLight.shadow.camera.right = 20 //最右边\ndirectionalLight.shadow.camera.top = 10 //最上边\ndirectionalLight.shadow.camera.bottom = -10 //最下面\n\n//这两个值决定生成阴影密度 默认512\ndirectionalLight.shadow.mapSize.height = 1024\ndirectionalLight.shadow.mapSize.width = 1024\n\n//告诉平行光需要开启阴影投射\ndirectionalLight.castShadow = true\n\nscene.add(directionalLight)\n\nconst group = new THREE.Group()\nconst geometry = new THREE.BoxGeometry(2, 2, 2)\nArray.from({ length: 30 }).forEach(() => {\n  const material = new THREE.MeshLambertMaterial({ color: randomColor() })\n  const box = new THREE.Mesh(geometry, material)\n\n  box.position.set(\n    THREE.Math.randFloatSpread(20),\n    THREE.Math.randFloatSpread(20),\n    THREE.Math.randFloatSpread(20)\n  )\n  group.add(box)\n})\nscene.add(group)\n\nrenderer.render(scene, camera)\n\n// 添加场景交互能力\nfunction onClick(evt) {\n  const raycaster = new THREE.Raycaster()\n  const mouse = new THREE.Vector2()\n\n  // 通过鼠标点击位置计算出射线所需要的点的位置，以 canvas 中心为原点，范围 [-1, 1]\n  mouse.x = (evt.clientX / 400) * 2 - 1\n  mouse.y = -(evt.clientY / 300) * 2 + 1\n\n  // 根据在屏幕的二维位置和相机的矩阵更新射线位置\n  raycaster.setFromCamera(mouse, camera)\n\n  // 获取射线与所有模型交互的数组几何\n  const intersects = raycaster.intersectObjects(scene.children, true)\n\n  intersects.forEach(child => {\n    child.object.material.color.set(0xff0000)\n  })\n\n  renderer.render(scene, camera)\n}\n\nrenderer.domElement.addEventListener('click', onClick)\n"}},[a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("randomColor")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" arrHex = [\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'0'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'1'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'2'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'3'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'4'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'5'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'6'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'7'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'8'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'9'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'a'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'b'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'c'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'d'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'e'")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'f'")]),s._v("\n    ],\n    strHex = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#'")]),s._v(",\n    index\n\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v("; i++) {\n    index = "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".round("),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".random() * "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v(")\n    strHex += arrHex[index]\n  }\n\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" strHex\n}\n\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" renderer = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.WebGLRenderer()\nrenderer.setSize("),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("400")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("300")]),s._v(")\n"),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".querySelector("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#app'")]),s._v(").appendChild(renderer.domElement)\n\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" scene = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Scene()\n\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" camera = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.PerspectiveCamera("),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("45")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("400")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("300")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("100")]),s._v(")\ncamera.position.set("),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(")\ncamera.lookAt("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Vector3("),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("))\n\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" ambientLight = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.AmbientLight("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#111111'")]),s._v(")\nscene.add(ambientLight)\n\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" directionalLight = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.DirectionalLight("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#ffffff'")]),s._v(")\ndirectionalLight.position.set("),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(")\n\ndirectionalLight.shadow.camera.near = "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" \ndirectionalLight.shadow.camera.far = "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("100")]),s._v(" \ndirectionalLight.shadow.camera.left = "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-20")]),s._v(" \ndirectionalLight.shadow.camera.right = "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(" \ndirectionalLight.shadow.camera.top = "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(" \ndirectionalLight.shadow.camera.bottom = "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-10")]),s._v(" \n\n\ndirectionalLight.shadow.mapSize.height = "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1024")]),s._v("\ndirectionalLight.shadow.mapSize.width = "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1024")]),s._v("\n\n\ndirectionalLight.castShadow = "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n\nscene.add(directionalLight)\n\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" group = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Group()\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" geometry = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.BoxGeometry("),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(")\n"),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Array")]),s._v(".from({ "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("length")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v(" }).forEach("),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" {\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" material = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.MeshLambertMaterial({ "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": randomColor() })\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" box = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry, material)\n\n  box.position.set(\n    THREE.Math.randFloatSpread("),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v("),\n    THREE.Math.randFloatSpread("),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v("),\n    THREE.Math.randFloatSpread("),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(")\n  )\n  group.add(box)\n})\nscene.add(group)\n\nrenderer.render(scene, camera)\n\n\n"),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("onClick")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("evt")]),s._v(") ")]),s._v("{\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" raycaster = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Raycaster()\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" mouse = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Vector2()\n\n  \n  mouse.x = (evt.clientX / "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("400")]),s._v(") * "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n  mouse.y = -(evt.clientY / "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("300")]),s._v(") * "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" + "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n\n  \n  raycaster.setFromCamera(mouse, camera)\n\n  \n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" intersects = raycaster.intersectObjects(scene.children, "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(")\n\n  intersects.forEach("),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("child")]),s._v(" =>")]),s._v(" {\n    child.object.material.color.set("),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0xff0000")]),s._v(")\n  })\n\n  renderer.render(scene, camera)\n}\n\nrenderer.domElement.addEventListener("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'click'")]),s._v(", onClick)\n")])])])],1)},[],!1,null,null,null);n.default=t.exports}}]);
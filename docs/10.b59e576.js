(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{42:function(s,n,r){"use strict";r.r(n);var a={components:{}},e=r(2),t=Object(e.a)(a,function(){var s=this,n=s.$createElement,r=s._self._c||n;return r("section",[r("h1",[s._v("创建 3D 物体")]),s._v(" "),s._m(0),s._v(" "),r("p",[s._v("其实现在会存在这样一个问题：每个面需要 4 个顶点，而每个顶点会被 3 个面共享。我们会创建一个包含 24 个顶点的数组列表，通过使用数组下标来索引顶点，然后把这些用于索引的下标传递给渲染程序而不是直接把整个顶点数据传递过去，这样来减少数据传递。那么也许你就会问：那么使用 8 个顶点就好了，为什么要使用 24 个顶点呢？这是因为每个顶点虽然被 3 个面共享但是它在每个面上需要使用不同的颜色信息。24 个顶点中的每一个都会有独立的颜色信息，这就会造成每个顶点位置都会有 3 份副本。")]),s._v(" "),r("h2",[s._v("1. 定义立方体顶点位置")]),s._v(" "),s._m(1),s._v(" "),r("h2",[s._v("2. 定义顶点颜色")]),s._v(" "),s._m(2),s._v(" "),r("h2",[s._v("3. 定义元素（三角形）数组")]),s._v(" "),s._m(3),s._v(" "),s._m(4),s._v(" "),s._m(5),s._v(" "),s._m(6),s._v(" "),r("p",[s._v("立方体的每个面都由 2 个三角形组成，那就是每个面需要 6 个顶点，或者说总共 36 个顶点，尽管有许多重复的。然而，因为索引数组的每个元素都是简单的整数类型，所以每一帧动画需要传递给渲染程序的数据也不是很多。")]),s._v(" "),r("block-demo",{attrs:{tip:"",source:"const app = document.querySelector('#app')\nconst canvas = document.createElement('canvas')\ncanvas.width = 400\ncanvas.height = 300\n\napp.appendChild(canvas)\n\nconst gl = canvas.getContext('webgl')\n\nstart()\n\nfunction start() {\n  // 顶点着色器\n  const vsScource = `\n        attribute vec4 aVertexPosition;\n        attribute vec4 aVertexColor;\n\n        uniform mat4 uModelViewMatrix;\n        uniform mat4 uProjectionMatrix;\n\n        varying lowp vec4 vColor;\n\n        void main() {\n          vColor = aVertexColor;\n          gl_Position  = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n        }\n      `\n\n  // 片段着色器\n  const fsSource = `\n        varying lowp vec4 vColor;\n\n        void main() {\n          gl_FragColor = vColor;\n        }\n      `\n\n  // 0： 创建 着色器连接程序 以告诉 WebGL 如何渲染数据\n  const shaderProgram = initShaderProgram(gl, vsScource, fsSource)\n  const programInfo = {\n    program: shaderProgram,\n    attribLocations: {\n      vertexPosition: gl.getAttribLocation(shaderProgram, 'aVertexPosition'),\n      vertexColor: gl.getAttribLocation(shaderProgram, 'aVertexColor')\n    },\n    uniformLocations: {\n      projectionMatrix: gl.getUniformLocation(\n        shaderProgram,\n        'uProjectionMatrix'\n      ),\n      modelViewMatrix: gl.getUniformLocation(shaderProgram, 'uModelViewMatrix')\n    }\n  }\n\n  // 1. 创建 缓冲区 存储所绘制图形的顶点\n  const buffers = initBuffers(gl)\n\n  // 2. 绘制场景\n  drawScene(gl, programInfo, buffers)\n\n  let d = 10\n\n  let r = 0\n\n  const step = () => {\n    r += 0.1\n\n    drawScene(gl, programInfo, buffers, d, r)\n    requestAnimationFrame(step)\n  }\n\n  requestAnimationFrame(step)\n}\n\n// 创建 着色器连接程序，将 顶点着色器 和 片段着色器 连接起来\nfunction initShaderProgram(gl, vsScource, fsSource) {\n  const vsShader = loadShader(gl, gl.VERTEX_SHADER, vsScource)\n  const fsShader = loadShader(gl, gl.FRAGMENT_SHADER, fsSource)\n\n  const shaderProgram = gl.createProgram()\n  // 0. 附加着色器\n  gl.attachShader(shaderProgram, vsShader)\n  // 0. 附加着色器\n  gl.attachShader(shaderProgram, fsShader)\n  // 1. 连接着色器\n  gl.linkProgram(shaderProgram)\n\n  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n    alert('创建 着色器连接程序 失败!' + gl.getProgramInfoLog(shaderProgram))\n    return null\n  }\n\n  return shaderProgram\n}\n\n// 创建着色器\nfunction loadShader(gl, type, source) {\n  // 0. 创建指定类型的 着色器\n  const shader = gl.createShader(type)\n  // 1. 上传 着色器源码\n  gl.shaderSource(shader, source)\n  // 2. 编译着色器\n  gl.compileShader(shader)\n\n  // 3. 检测 着色器 是否编译成功\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    alert('编译着色器失败！' + gl.getShaderInfoLog(shader))\n    gl.deleteShader(shader)\n    return null\n  }\n\n  return shader\n}\n\n// 创建 缓冲区\nfunction initBuffers(gl) {\n  // 0. 创建 buffer 存储正方形顶点\n  const buffer = gl.createBuffer()\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer)\n\n  // 1. 将顶点传入 WebGL\n  const positions = [\n    // Front face\n    -1.0,\n    -1.0,\n    1.0,\n    1.0,\n    -1.0,\n    1.0,\n    1.0,\n    1.0,\n    1.0,\n    -1.0,\n    1.0,\n    1.0,\n\n    // Back face\n    -1.0,\n    -1.0,\n    -1.0,\n    -1.0,\n    1.0,\n    -1.0,\n    1.0,\n    1.0,\n    -1.0,\n    1.0,\n    -1.0,\n    -1.0,\n\n    // Top face\n    -1.0,\n    1.0,\n    -1.0,\n    -1.0,\n    1.0,\n    1.0,\n    1.0,\n    1.0,\n    1.0,\n    1.0,\n    1.0,\n    -1.0,\n\n    // Bottom face\n    -1.0,\n    -1.0,\n    -1.0,\n    1.0,\n    -1.0,\n    -1.0,\n    1.0,\n    -1.0,\n    1.0,\n    -1.0,\n    -1.0,\n    1.0,\n\n    // Right face\n    1.0,\n    -1.0,\n    -1.0,\n    1.0,\n    1.0,\n    -1.0,\n    1.0,\n    1.0,\n    1.0,\n    1.0,\n    -1.0,\n    1.0,\n\n    // Left face\n    -1.0,\n    -1.0,\n    -1.0,\n    -1.0,\n    -1.0,\n    1.0,\n    -1.0,\n    1.0,\n    1.0,\n    -1.0,\n    1.0,\n    -1.0\n  ]\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW)\n\n  // 相比第2节，加入的颜色\n  const colors = [\n    [1.0, 1.0, 1.0, 1.0], // Front face: white\n    [1.0, 0.0, 0.0, 1.0], // Back face: red\n    [0.0, 1.0, 0.0, 1.0], // Top face: green\n    [0.0, 0.0, 1.0, 1.0], // Bottom face: blue\n    [1.0, 1.0, 0.0, 1.0], // Right face: yellow\n    [1.0, 0.0, 1.0, 1.0] // Left face: purple\n  ]\n  var generatedColors = []\n\n  for (j = 0; j < 6; j++) {\n    var c = colors[j]\n\n    for (var i = 0; i < 4; i++) {\n      generatedColors = generatedColors.concat(c)\n    }\n  }\n\n  const colorBuffer = gl.createBuffer()\n  gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer)\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    new Float32Array(generatedColors),\n    gl.STATIC_DRAW\n  )\n\n  // 三角形数组\n\n  var cubeVerticesIndexBuffer = gl.createBuffer()\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVerticesIndexBuffer)\n\n  // This array defines each face as two triangles, using the\n  // indices into the vertex array to specify each triangle's\n  // position.\n\n  var cubeVertexIndices = [\n    0,\n    1,\n    2,\n    0,\n    2,\n    3, // front\n    4,\n    5,\n    6,\n    4,\n    6,\n    7, // back\n    8,\n    9,\n    10,\n    8,\n    10,\n    11, // top\n    12,\n    13,\n    14,\n    12,\n    14,\n    15, // bottom\n    16,\n    17,\n    18,\n    16,\n    18,\n    19, // right\n    20,\n    21,\n    22,\n    20,\n    22,\n    23 // left\n  ]\n\n  // Now send the element array to GL\n\n  gl.bufferData(\n    gl.ELEMENT_ARRAY_BUFFER,\n    new Uint16Array(cubeVertexIndices),\n    gl.STATIC_DRAW\n  )\n\n  return {\n    position: buffer,\n    color: colorBuffer,\n    cubeVerticesIndexBuffer\n  }\n}\n\n// 绘制场景\nfunction drawScene(gl, programInfo, buffers, z = 10.0, rotate = 0) {\n  gl.clearColor(0.0, 0.0, 0.0, 1)\n  gl.clearDepth(1) // 清空\n  gl.enable(gl.DEPTH_TEST)\n  gl.depthFunc(gl.LEQUAL)\n\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT)\n\n  // 利用 gl-matrix 创建一个 透视投影相机\n  const feildOfView = (45 * Math.PI) / 180\n  const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight\n  const zNear = 0.1\n  const zFar = 100.0\n  const projectionMatrix = mat4.create()\n  mat4.perspective(projectionMatrix, feildOfView, aspect, zNear, zFar)\n\n  const modelViewMatrix = mat4.create()\n  mat4.translate(modelViewMatrix, modelViewMatrix, [0, 0.0, -z])\n\n  mat4.rotate(\n    modelViewMatrix, // destination matrix\n    modelViewMatrix, // matrix to rotate\n    rotate, // amount to rotate in radians\n    [2, 0, 8]\n  )\n\n  mat4.rotate(\n    modelViewMatrix, // destination matrix\n    modelViewMatrix, // matrix to rotate\n    rotate * 0.7, // amount to rotate in radians\n    [2, 1, -8]\n  )\n\n  {\n    const numComponents = 3\n    const type = gl.FLOAT\n    const normalize = false\n    const stride = 0\n    const offset = 0\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffers.position)\n    gl.vertexAttribPointer(\n      programInfo.attribLocations.vertexPosition,\n      numComponents,\n      type,\n      normalize,\n      stride,\n      offset\n    )\n    gl.enableVertexAttribArray(programInfo.attribLocations.vertexPosition)\n  }\n\n  {\n    const numComponents = 4\n    const type = gl.FLOAT\n    const normalize = false\n    const stride = 0\n    const offset = 0\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffers.color)\n    gl.vertexAttribPointer(\n      programInfo.attribLocations.vertexColor,\n      numComponents,\n      type,\n      normalize,\n      stride,\n      offset\n    )\n    gl.enableVertexAttribArray(programInfo.attribLocations.vertexColor)\n  }\n\n  // 告知 WebGL 使用 着色器 绘制\n  gl.useProgram(programInfo.program)\n\n  gl.uniformMatrix4fv(\n    programInfo.uniformLocations.projectionMatrix,\n    false,\n    projectionMatrix\n  )\n  gl.uniformMatrix4fv(\n    programInfo.uniformLocations.modelViewMatrix,\n    false,\n    modelViewMatrix\n  )\n\n  {\n    // const offset = 0;\n    // const vertexCount = 4;\n    // gl.drawArrays(gl.TRIANGLE_STRIP, offset, vertexCount);\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffers.cubeVerticesIndexBuffer)\n    const vertexCount = 36 // 可以尝试修改，一个面 2 个三角形，6个顶点\n    const type = gl.UNSIGNED_SHORT\n    const offset = 0\n    gl.drawElements(gl.TRIANGLES, vertexCount, type, offset)\n  }\n}\n"}},[r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" app = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".querySelector("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#app'")]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" canvas = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createElement("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'canvas'")]),s._v(")\ncanvas.width = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("400")]),s._v("\ncanvas.height = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("300")]),s._v("\n\napp.appendChild(canvas)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" gl = canvas.getContext("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'webgl'")]),s._v(")\n\nstart()\n\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("start")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n  \n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" vsScource = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`\n        attribute vec4 aVertexPosition;\n        attribute vec4 aVertexColor;\n\n        uniform mat4 uModelViewMatrix;\n        uniform mat4 uProjectionMatrix;\n\n        varying lowp vec4 vColor;\n\n        void main() {\n          vColor = aVertexColor;\n          gl_Position  = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n        }\n      `")]),s._v("\n\n  \n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" fsSource = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`\n        varying lowp vec4 vColor;\n\n        void main() {\n          gl_FragColor = vColor;\n        }\n      `")]),s._v("\n\n  \n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" shaderProgram = initShaderProgram(gl, vsScource, fsSource)\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" programInfo = {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("program")]),s._v(": shaderProgram,\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("attribLocations")]),s._v(": {\n      "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("vertexPosition")]),s._v(": gl.getAttribLocation(shaderProgram, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'aVertexPosition'")]),s._v("),\n      "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("vertexColor")]),s._v(": gl.getAttribLocation(shaderProgram, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'aVertexColor'")]),s._v(")\n    },\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("uniformLocations")]),s._v(": {\n      "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("projectionMatrix")]),s._v(": gl.getUniformLocation(\n        shaderProgram,\n        "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'uProjectionMatrix'")]),s._v("\n      ),\n      "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("modelViewMatrix")]),s._v(": gl.getUniformLocation(shaderProgram, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'uModelViewMatrix'")]),s._v(")\n    }\n  }\n\n  \n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" buffers = initBuffers(gl)\n\n  \n  drawScene(gl, programInfo, buffers)\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" d = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v("\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" r = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" step = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" {\n    r += "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v("\n\n    drawScene(gl, programInfo, buffers, d, r)\n    requestAnimationFrame(step)\n  }\n\n  requestAnimationFrame(step)\n}\n\n\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("initShaderProgram")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("gl, vsScource, fsSource")]),s._v(") ")]),s._v("{\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" vsShader = loadShader(gl, gl.VERTEX_SHADER, vsScource)\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" fsShader = loadShader(gl, gl.FRAGMENT_SHADER, fsSource)\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" shaderProgram = gl.createProgram()\n  \n  gl.attachShader(shaderProgram, vsShader)\n  \n  gl.attachShader(shaderProgram, fsShader)\n  \n  gl.linkProgram(shaderProgram)\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'创建 着色器连接程序 失败!'")]),s._v(" + gl.getProgramInfoLog(shaderProgram))\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v("\n  }\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" shaderProgram\n}\n\n\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("loadShader")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("gl, type, source")]),s._v(") ")]),s._v("{\n  \n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" shader = gl.createShader(type)\n  \n  gl.shaderSource(shader, source)\n  \n  gl.compileShader(shader)\n\n  \n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'编译着色器失败！'")]),s._v(" + gl.getShaderInfoLog(shader))\n    gl.deleteShader(shader)\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v("\n  }\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" shader\n}\n\n\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("initBuffers")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("gl")]),s._v(") ")]),s._v("{\n  \n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" buffer = gl.createBuffer()\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer)\n\n  \n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" positions = [\n    \n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n\n    \n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n\n    \n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n\n    \n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n\n    \n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n\n    \n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.0")]),s._v("\n  ]\n  gl.bufferData(gl.ARRAY_BUFFER, "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Float32Array")]),s._v("(positions), gl.STATIC_DRAW)\n\n  \n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" colors = [\n    ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v("], \n    ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v("], \n    ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v("], \n    ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v("], \n    ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v("], \n    ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v("] \n  ]\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" generatedColors = []\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" (j = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; j < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v("; j++) {\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" c = colors[j]\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v("; i++) {\n      generatedColors = generatedColors.concat(c)\n    }\n  }\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" colorBuffer = gl.createBuffer()\n  gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer)\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Float32Array")]),s._v("(generatedColors),\n    gl.STATIC_DRAW\n  )\n\n  \n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" cubeVerticesIndexBuffer = gl.createBuffer()\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVerticesIndexBuffer)\n\n  \n  \n  \n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" cubeVertexIndices = [\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(", \n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("7")]),s._v(", \n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("9")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("11")]),s._v(", \n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("12")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("13")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("14")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("12")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("14")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v(", \n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("16")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("17")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("18")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("16")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("18")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("19")]),s._v(", \n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("21")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("22")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("22")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("23")]),s._v(" \n  ]\n\n  \n\n  gl.bufferData(\n    gl.ELEMENT_ARRAY_BUFFER,\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Uint16Array")]),s._v("(cubeVertexIndices),\n    gl.STATIC_DRAW\n  )\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("position")]),s._v(": buffer,\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": colorBuffer,\n    cubeVerticesIndexBuffer\n  }\n}\n\n\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("drawScene")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("gl, programInfo, buffers, z = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10.0")]),s._v(", rotate = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")])]),s._v(") ")]),s._v("{\n  gl.clearColor("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(")\n  gl.clearDepth("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") \n  gl.enable(gl.DEPTH_TEST)\n  gl.depthFunc(gl.LEQUAL)\n\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT)\n\n  \n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" feildOfView = ("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("45")]),s._v(" * "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".PI) / "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("180")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" aspect = gl.canvas.clientWidth / gl.canvas.clientHeight\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" zNear = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" zFar = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("100.0")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" projectionMatrix = mat4.create()\n  mat4.perspective(projectionMatrix, feildOfView, aspect, zNear, zFar)\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" modelViewMatrix = mat4.create()\n  mat4.translate(modelViewMatrix, modelViewMatrix, ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", -z])\n\n  mat4.rotate(\n    modelViewMatrix, \n    modelViewMatrix, \n    rotate, \n    ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8")]),s._v("]\n  )\n\n  mat4.rotate(\n    modelViewMatrix, \n    modelViewMatrix, \n    rotate * "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.7")]),s._v(", \n    ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-8")]),s._v("]\n  )\n\n  {\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" numComponents = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" type = gl.FLOAT\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" normalize = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" stride = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" offset = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffers.position)\n    gl.vertexAttribPointer(\n      programInfo.attribLocations.vertexPosition,\n      numComponents,\n      type,\n      normalize,\n      stride,\n      offset\n    )\n    gl.enableVertexAttribArray(programInfo.attribLocations.vertexPosition)\n  }\n\n  {\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" numComponents = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" type = gl.FLOAT\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" normalize = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" stride = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" offset = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffers.color)\n    gl.vertexAttribPointer(\n      programInfo.attribLocations.vertexColor,\n      numComponents,\n      type,\n      normalize,\n      stride,\n      offset\n    )\n    gl.enableVertexAttribArray(programInfo.attribLocations.vertexColor)\n  }\n\n  \n  gl.useProgram(programInfo.program)\n\n  gl.uniformMatrix4fv(\n    programInfo.uniformLocations.projectionMatrix,\n    "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n    projectionMatrix\n  )\n  gl.uniformMatrix4fv(\n    programInfo.uniformLocations.modelViewMatrix,\n    "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n    modelViewMatrix\n  )\n\n  {\n    \n    \n    \n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffers.cubeVerticesIndexBuffer)\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" vertexCount = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("36")]),s._v(" \n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" type = gl.UNSIGNED_SHORT\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" offset = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("\n    gl.drawElements(gl.TRIANGLES, vertexCount, type, offset)\n  }\n}\n")])])])],1)},[function(){var s=this.$createElement,n=this._self._c||s;return n("p",[this._v("现在让我们给之前的正方形添加五个面从而可以创建一个三维的立方体。最简单的方式就是通过调用方法 "),n("code",{pre:!0},[this._v("gl.drawElements()")]),this._v(" 使用顶点数组列表来替换之前的通过方法 "),n("code",{pre:!0},[this._v("gl.drawArrays()")]),this._v(" 直接使用顶点数组。而顶点数组列表里保存着将会被引用到一个个独立的顶点。")])},function(){var s=this.$createElement,n=this._self._c||s;return n("pre",{pre:!0},[n("code",{pre:!0,attrs:{"v-pre":""}},[this._v("var vertices = [\n  // Front face\n  -1.0, -1.0,  1.0,\n   1.0, -1.0,  1.0,\n   1.0,  1.0,  1.0,\n  -1.0,  1.0,  1.0,\n\n  // Back face\n  -1.0, -1.0, -1.0,\n  -1.0,  1.0, -1.0,\n   1.0,  1.0, -1.0,\n   1.0, -1.0, -1.0,\n\n  // Top face\n  -1.0,  1.0, -1.0,\n  -1.0,  1.0,  1.0,\n   1.0,  1.0,  1.0,\n   1.0,  1.0, -1.0,\n\n  // Bottom face\n  -1.0, -1.0, -1.0,\n   1.0, -1.0, -1.0,\n   1.0, -1.0,  1.0,\n  -1.0, -1.0,  1.0,\n\n  // Right face\n   1.0, -1.0, -1.0,\n   1.0,  1.0, -1.0,\n   1.0,  1.0,  1.0,\n   1.0, -1.0,  1.0,\n\n  // Left face\n  -1.0, -1.0, -1.0,\n  -1.0, -1.0,  1.0,\n  -1.0,  1.0,  1.0,\n  -1.0,  1.0, -1.0\n];\n")])])},function(){var s=this,n=s.$createElement,r=s._self._c||n;return r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" colors = [\n  ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v("], \n  ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v("], \n  ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v("], \n  ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v("], \n  ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v("], \n  ["),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.0")]),s._v("] \n]\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" generatedColors = []\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" (j = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; j < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v("; j++) {\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" c = colors[j]\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v("; i++) {\n    generatedColors = generatedColors.concat(c)\n  }\n}\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" cubeVerticesColorBuffer = gl.createBuffer()\ngl.bindBuffer(gl.ARRAY_BUFFER, cubeVerticesColorBuffer)\ngl.bufferData(\n  gl.ARRAY_BUFFER,\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Float32Array")]),s._v("(generatedColors),\n  gl.STATIC_DRAW\n)\n")])])},function(){var s=this.$createElement,n=this._self._c||s;return n("pre",{pre:!0},[n("code",{pre:!0,attrs:{"v-pre":""}},[this._v("var cubeVerticesIndexBuffer = gl.createBuffer()\ngl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVerticesIndexBuffer)\nvar cubeVertexIndices = [\n  0,  1,  2,      0,  2,  3,    // front\n  4,  5,  6,      4,  6,  7,    // back\n  8,  9,  10,     8,  10, 11,   // top\n  12, 13, 14,     12, 14, 15,   // bottom\n  16, 17, 18,     16, 18, 19,   // right\n  20, 21, 22,     20, 22, 23    // left\n];\n\n\ngl.bufferData(\n  gl.ELEMENT_ARRAY_BUFFER,\n  new Uint16Array(cubeVertexIndices),\n  gl.STATIC_DRAW\n)\n")])])},function(){var s=this.$createElement,n=this._self._c||s;return n("p",[this._v("代码中的 "),n("code",{pre:!0},[this._v("cubeVertexIndices")]),this._v(" 数组声明每一个面都使用两个三角形来渲染。通过立方体顶点数组的索引指定每个三角形的顶点。那么这个立方体就是由 12 个三角形组成的了。")])},function(){var s=this.$createElement,n=this._self._c||s;return n("p",[this._v("接下来就需要在 "),n("code",{pre:!0},[this._v("drawScene()")]),this._v(" 函数里添加代码使用立方体顶点索引数据来渲染这个立方体了。代码里添加了对 "),n("code",{pre:!0},[this._v("gl.bindBuffer()")]),this._v(" 和 "),n("code",{pre:!0},[this._v("gl.drawElements()")]),this._v(" 的调用：")])},function(){var s=this.$createElement,n=this._self._c||s;return n("pre",{pre:!0},[n("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[this._v("gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVerticesIndexBuffer)\nsetMatrixUniforms()\ngl.drawElements(gl.TRIANGLES, "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[this._v("36")]),this._v(", gl.UNSIGNED_SHORT, "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[this._v("0")]),this._v(")\n")])])}],!1,null,null,null);n.default=t.exports}}]);
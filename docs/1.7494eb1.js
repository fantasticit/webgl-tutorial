(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{34:function(s,a,r){"use strict";r.r(a);var e={components:{}},n=r(0),t=Object(n.a)(e,function(){var s=this,a=s.$createElement,r=s._self._c||a;return r("section",[r("h1",[s._v("场景交互")]),s._v(" "),r("p",[s._v("点击 方块。")]),s._v(" "),r("block-demo",{attrs:{tip:"",source:"function randomColor() {\n  var arrHex = [\n      '0',\n      '1',\n      '2',\n      '3',\n      '4',\n      '5',\n      '6',\n      '7',\n      '8',\n      '9',\n      'a',\n      'b',\n      'c',\n      'd',\n      'e',\n      'f'\n    ],\n    strHex = '#',\n    index\n\n  for (var i = 0; i < 6; i++) {\n    index = Math.round(Math.random() * 15)\n    strHex += arrHex[index]\n  }\n\n  return strHex\n}\n\nconst { innerWidth: width, innerHeight: height } = window\n\nconst renderer = new THREE.WebGLRenderer()\nrenderer.setSize(width, height)\ndocument.querySelector('#app').appendChild(renderer.domElement)\n\nconst scene = new THREE.Scene()\n\nconst camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 100)\ncamera.position.set(0, 20, 20)\ncamera.lookAt(new THREE.Vector3(0, 0, 0))\n\nconst ambientLight = new THREE.AmbientLight('#111111')\nscene.add(ambientLight)\n\nconst directionalLight = new THREE.DirectionalLight('#ffffff')\ndirectionalLight.position.set(10, 20, 10)\n\ndirectionalLight.shadow.camera.near = 1 //产生阴影的最近距离\ndirectionalLight.shadow.camera.far = 100 //产生阴影的最远距离\ndirectionalLight.shadow.camera.left = -20 //产生阴影距离位置的最左边位置\ndirectionalLight.shadow.camera.right = 20 //最右边\ndirectionalLight.shadow.camera.top = 10 //最上边\ndirectionalLight.shadow.camera.bottom = -10 //最下面\n\n//这两个值决定生成阴影密度 默认512\ndirectionalLight.shadow.mapSize.height = 1024\ndirectionalLight.shadow.mapSize.width = 1024\n\n//告诉平行光需要开启阴影投射\ndirectionalLight.castShadow = true\n\nscene.add(directionalLight)\n\nconst group = new THREE.Group()\nconst geometry = new THREE.BoxGeometry(2, 2, 2)\nArray.from({ length: 30 }).forEach(() => {\n  const material = new THREE.MeshLambertMaterial({ color: randomColor() })\n  const box = new THREE.Mesh(geometry, material)\n\n  box.position.set(\n    THREE.Math.randFloatSpread(20),\n    THREE.Math.randFloatSpread(20),\n    THREE.Math.randFloatSpread(20)\n  )\n  group.add(box)\n})\nscene.add(group)\n\nrenderer.render(scene, camera)\n\n// 添加场景交互能力\nfunction onClick(evt) {\n  const raycaster = new THREE.Raycaster()\n  const mouse = new THREE.Vector2()\n\n  // 通过鼠标点击位置计算出射线所需要的点的位置，以 canvas 中心为原点，范围 [-1, 1]\n  mouse.x = (evt.clientX / width) * 2 - 1\n  mouse.y = -(evt.clientY / height) * 2 + 1\n\n  // 根据在屏幕的二维位置和相机的矩阵更新射线位置\n  raycaster.setFromCamera(mouse, camera)\n\n  // 获取射线与所有模型交互的数组几何\n  const intersects = raycaster.intersectObjects(scene.children, true)\n\n  intersects.forEach(child => {\n    child.object.material.color.set(0xff0000)\n  })\n\n  renderer.render(scene, camera)\n}\n\nrenderer.domElement.addEventListener('click', onClick)\n"}},[r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("randomColor")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" arrHex = [\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'0'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'1'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'2'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'3'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'4'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'5'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'6'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'7'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'8'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'9'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'a'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'b'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'c'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'d'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'e'")]),s._v(",\n      "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'f'")]),s._v("\n    ],\n    strHex = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#'")]),s._v(",\n    index\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v("; i++) {\n    index = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".round("),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".random() * "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v(")\n    strHex += arrHex[index]\n  }\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" strHex\n}\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" { "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("innerWidth")]),s._v(": width, "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("innerHeight")]),s._v(": height } = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" renderer = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.WebGLRenderer()\nrenderer.setSize(width, height)\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".querySelector("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#app'")]),s._v(").appendChild(renderer.domElement)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" scene = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Scene()\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" camera = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.PerspectiveCamera("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("45")]),s._v(", width / height, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("100")]),s._v(")\ncamera.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(")\ncamera.lookAt("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Vector3("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("))\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" ambientLight = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.AmbientLight("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#111111'")]),s._v(")\nscene.add(ambientLight)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" directionalLight = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.DirectionalLight("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#ffffff'")]),s._v(")\ndirectionalLight.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(")\n\ndirectionalLight.shadow.camera.near = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//产生阴影的最近距离")]),s._v("\ndirectionalLight.shadow.camera.far = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("100")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//产生阴影的最远距离")]),s._v("\ndirectionalLight.shadow.camera.left = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-20")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//产生阴影距离位置的最左边位置")]),s._v("\ndirectionalLight.shadow.camera.right = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//最右边")]),s._v("\ndirectionalLight.shadow.camera.top = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//最上边")]),s._v("\ndirectionalLight.shadow.camera.bottom = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-10")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//最下面")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//这两个值决定生成阴影密度 默认512")]),s._v("\ndirectionalLight.shadow.mapSize.height = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1024")]),s._v("\ndirectionalLight.shadow.mapSize.width = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1024")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//告诉平行光需要开启阴影投射")]),s._v("\ndirectionalLight.castShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n\nscene.add(directionalLight)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" group = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Group()\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" geometry = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.BoxGeometry("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Array")]),s._v(".from({ "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("length")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v(" }).forEach("),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" {\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" material = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.MeshLambertMaterial({ "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": randomColor() })\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" box = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry, material)\n\n  box.position.set(\n    THREE.Math.randFloatSpread("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v("),\n    THREE.Math.randFloatSpread("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v("),\n    THREE.Math.randFloatSpread("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("20")]),s._v(")\n  )\n  group.add(box)\n})\nscene.add(group)\n\nrenderer.render(scene, camera)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 添加场景交互能力")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("onClick")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("evt")]),s._v(") ")]),s._v("{\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" raycaster = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Raycaster()\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" mouse = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Vector2()\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 通过鼠标点击位置计算出射线所需要的点的位置，以 canvas 中心为原点，范围 [-1, 1]")]),s._v("\n  mouse.x = (evt.clientX / width) * "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" - "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n  mouse.y = -(evt.clientY / height) * "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" + "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 根据在屏幕的二维位置和相机的矩阵更新射线位置")]),s._v("\n  raycaster.setFromCamera(mouse, camera)\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 获取射线与所有模型交互的数组几何")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" intersects = raycaster.intersectObjects(scene.children, "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(")\n\n  intersects.forEach("),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("child")]),s._v(" =>")]),s._v(" {\n    child.object.material.color.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0xff0000")]),s._v(")\n  })\n\n  renderer.render(scene, camera)\n}\n\nrenderer.domElement.addEventListener("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'click'")]),s._v(", onClick)\n")])])]),r("block-demo",{attrs:{tip:"",source:"const { innerWidth: width, innerHeight: height } = window\n\nconst renderer = new THREE.WebGLRenderer()\nrenderer.setSize(width, height)\nrenderer.shadowMapEnabled = true\nrenderer.shadowMap.type = THREE.PCFSoftShadowMap\ndocument.querySelector('#app').appendChild(renderer.domElement)\n\nconst scene = new THREE.Scene()\n\nvar h = window.innerHeight,\n  w = window.innerWidth\nvar aspectRatio = w / h,\n  fieldOfView = 25,\n  nearPlane = 0.1,\n  farPlane = 1000\nvar camera = new THREE.PerspectiveCamera(\n  fieldOfView,\n  aspectRatio,\n  nearPlane,\n  farPlane\n)\n\ncamera.position.set(-5, 6, 8)\n// camera.position.set(0,0,8); // front\n// camera.position.set(-10,.2,0); //left\n// camera.position.set(0,10,0); //top\n// camera.position.y=4;\n\ncamera.lookAt(new THREE.Vector3(0, 0, 0))\n\n//Ambient light\nvar light = new THREE.AmbientLight(0xffffff, 0.5)\n\nvar shadowLight = new THREE.DirectionalLight(0xffffff, 0.5)\nshadowLight.position.set(200, 200, 200)\nshadowLight.castShadow = true\n\nvar backLight = new THREE.DirectionalLight(0xffffff, 0.2)\nbackLight.position.set(-100, 200, 50)\nbackLight.castShadow = true\nscene.add(backLight)\nscene.add(light)\nscene.add(shadowLight)\n\n// grassland left\nvar geometry_left = new THREE.BoxGeometry(2, 0.2, 2)\nvar material_grass = new THREE.MeshLambertMaterial({ color: 0xabd66a })\nvar ground_left = new THREE.Mesh(geometry_left, material_grass)\nground_left.position.set(-1, 0.1, 0)\nscene.add(ground_left)\ncustomizeShadow(ground_left, 0.25) // mess, opacity\n\n//river\nvar geometry_river = new THREE.BoxGeometry(1, 0.1, 2)\nvar material_river = new THREE.MeshLambertMaterial({ color: 0x70b7e3 })\nvar river = new THREE.Mesh(geometry_river, material_river)\nriver.position.set(0.5, 0.1, 0)\nscene.add(river)\ncustomizeShadow(river, 0.08) // mess, opacity\n//river bed\nvar geometry_bed = new THREE.BoxGeometry(1, 0.05, 2)\nvar bed = new THREE.Mesh(geometry_bed, material_grass)\nbed.position.set(0.5, 0.025, 0)\nscene.add(bed)\n\n//grassland right\nvar geometry_right = new THREE.BoxGeometry(1, 0.2, 2)\nvar ground_right = new THREE.Mesh(geometry_right, material_grass)\nground_right.position.set(1.5, 0.1, 0)\nscene.add(ground_right)\ncustomizeShadow(ground_right, 0.25) // mess, opacity\n\nvar tree = function(x, z) {\n  this.x = x\n  this.z = z\n\n  //trunk\n  var material_trunk = new THREE.MeshLambertMaterial({ color: 0x9a6169 })\n  var geometry_trunk = new THREE.BoxGeometry(0.15, 0.15, 0.15)\n  var trunk = new THREE.Mesh(geometry_trunk, material_trunk)\n  trunk.position.set(this.x, 0.275, this.z)\n  trunk.castShadow = true\n  trunk.receiveShadow = true\n  scene.add(trunk)\n\n  //leaves\n  var geometry_leaves = new THREE.BoxGeometry(0.25, 0.4, 0.25)\n  var material_leaves = new THREE.MeshLambertMaterial({ color: 0x65bb61 })\n  var leaves = new THREE.Mesh(geometry_leaves, material_leaves)\n  leaves.position.set(this.x, 0.2 + 0.15 + 0.4 / 2, this.z)\n  leaves.castShadow = true\n  customizeShadow(leaves, 0.25) // mess, opacity\n  scene.add(leaves)\n}\n\n//left\ntree(-1.75, -0.85)\ntree(-1.75, -0.15)\ntree(-1.5, -0.5)\ntree(-1.5, 0.4)\ntree(-1.25, -0.85)\ntree(-1.25, 0.75)\ntree(-0.75, -0.85)\ntree(-0.75, -0.25)\ntree(-0.25, -0.85)\n//right\ntree(1.25, -0.85)\ntree(1.25, 0.75)\n\ntree(1.5, -0.5)\ntree(1.75, -0.85)\ntree(1.75, 0.35)\n\nfunction customizeShadow(t, a) {\n  //opacity, target mesh\n  var material_shadow = new THREE.ShadowMaterial({ opacity: a })\n  var mesh_shadow = new THREE.Mesh(t.geometry, material_shadow)\n  mesh_shadow.position.set(t.position.x, t.position.y, t.position.z)\n  mesh_shadow.receiveShadow = true\n  scene.add(mesh_shadow)\n}\n\nvar material_wood = new THREE.MeshLambertMaterial({ color: 0xa98f78 })\n\n//bridge - wood block\nfor (var i = 0; i < 6; i++) {\n  var geometry_block = new THREE.BoxGeometry(0.15, 0.02, 0.4)\n  var block = new THREE.Mesh(geometry_block, material_wood)\n  block.position.set(0 + 0.2 * i, 0.21, 0.2)\n  block.castShadow = true\n  block.receiveShadow = true\n  scene.add(block)\n}\n//bridge - rail\nvar geometry_rail_v = new THREE.BoxGeometry(0.04, 0.3, 0.04)\nvar rail_1 = new THREE.Mesh(geometry_rail_v, material_wood)\nrail_1.position.set(-0.1, 0.35, 0.4)\nrail_1.castShadow = true\ncustomizeShadow(rail_1, 0.2)\nscene.add(rail_1)\n\nvar rail_2 = new THREE.Mesh(geometry_rail_v, material_wood)\nrail_2.position.set(1.1, 0.35, 0.4)\nrail_2.castShadow = true\ncustomizeShadow(rail_2, 0.2)\nscene.add(rail_2)\n\nvar rail_3 = new THREE.Mesh(geometry_rail_v, material_wood)\nrail_3.position.set(-0.1, 0.35, 0)\nrail_3.castShadow = true\ncustomizeShadow(rail_3, 0.2)\nscene.add(rail_3)\n\nvar rail_4 = new THREE.Mesh(geometry_rail_v, material_wood)\nrail_4.position.set(1.1, 0.35, 0)\nrail_4.castShadow = true\ncustomizeShadow(rail_4, 0.2)\nscene.add(rail_4)\n\nvar geometry_rail_h = new THREE.BoxGeometry(1.2, 0.04, 0.04)\nvar rail_h1 = new THREE.Mesh(geometry_rail_h, material_wood)\nrail_h1.position.set(0.5, 0.42, 0.4)\nrail_h1.castShadow = true\ncustomizeShadow(rail_h1, 0.2)\nscene.add(rail_h1)\n\nvar rail_h2 = new THREE.Mesh(geometry_rail_h, material_wood)\nrail_h2.position.set(0.5, 0.42, 0)\nrail_h2.castShadow = true\ncustomizeShadow(rail_h2, 0.2)\nscene.add(rail_h2)\n\nvar Drop = function() {\n  this.geometry = new THREE.BoxGeometry(0.1, 0.1, 0.1)\n  this.drop = new THREE.Mesh(this.geometry, material_river)\n  this.drop.position.set(\n    Math.random(0.1, 0.9),\n    0.1,\n    1 + (Math.random() - 0.5) * 0.1\n  )\n  scene.add(this.drop)\n  this.speed = 0\n  this.lifespan = Math.random() * 50 + 50\n\n  this.update = function() {\n    this.speed += 0.0007\n    this.lifespan--\n    this.drop.position.x += (0.5 - this.drop.position.x) / 70\n    this.drop.position.y -= this.speed\n  }\n}\nvar drops = []\n\nvar count = 0\nvar render = function() {\n  requestAnimationFrame(render)\n  if (count % 3 == 0) {\n    for (var i = 0; i < 5; i++) {\n      drops.push(new Drop())\n    }\n  }\n  count++\n  for (var i = 0; i < drops.length; i++) {\n    drops[i].update()\n    if (drops[i].lifespan < 0) {\n      scene.remove(scene.getObjectById(drops[i].drop.id))\n      drops.splice(i, 1)\n    }\n  }\n  renderer.render(scene, camera)\n}\nrender()\n"}},[r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" { "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("innerWidth")]),s._v(": width, "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("innerHeight")]),s._v(": height } = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" renderer = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.WebGLRenderer()\nrenderer.setSize(width, height)\nrenderer.shadowMapEnabled = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\nrenderer.shadowMap.type = THREE.PCFSoftShadowMap\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".querySelector("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#app'")]),s._v(").appendChild(renderer.domElement)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" scene = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Scene()\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" h = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v(".innerHeight,\n  w = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v(".innerWidth\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" aspectRatio = w / h,\n  fieldOfView = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("25")]),s._v(",\n  nearPlane = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(",\n  farPlane = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1000")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" camera = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.PerspectiveCamera(\n  fieldOfView,\n  aspectRatio,\n  nearPlane,\n  farPlane\n)\n\ncamera.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-5")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8")]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// camera.position.set(0,0,8); // front")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// camera.position.set(-10,.2,0); //left")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// camera.position.set(0,10,0); //top")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// camera.position.y=4;")]),s._v("\n\ncamera.lookAt("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Vector3("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("))\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//Ambient light")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" light = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.AmbientLight("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0xffffff")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.5")]),s._v(")\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" shadowLight = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.DirectionalLight("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0xffffff")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.5")]),s._v(")\nshadowLight.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("200")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("200")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("200")]),s._v(")\nshadowLight.castShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" backLight = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.DirectionalLight("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0xffffff")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.2")]),s._v(")\nbackLight.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-100")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("200")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("50")]),s._v(")\nbackLight.castShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\nscene.add(backLight)\nscene.add(light)\nscene.add(shadowLight)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// grassland left")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" geometry_left = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.BoxGeometry("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.2")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" material_grass = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.MeshLambertMaterial({ "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0xabd66a")]),s._v(" })\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" ground_left = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry_left, material_grass)\nground_left.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(")\nscene.add(ground_left)\ncustomizeShadow(ground_left, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.25")]),s._v(") "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// mess, opacity")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//river")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" geometry_river = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.BoxGeometry("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" material_river = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.MeshLambertMaterial({ "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0x70b7e3")]),s._v(" })\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" river = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry_river, material_river)\nriver.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.5")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(")\nscene.add(river)\ncustomizeShadow(river, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.08")]),s._v(") "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// mess, opacity")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//river bed")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" geometry_bed = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.BoxGeometry("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.05")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" bed = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry_bed, material_grass)\nbed.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.5")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.025")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(")\nscene.add(bed)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//grassland right")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" geometry_right = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.BoxGeometry("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.2")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" ground_right = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry_right, material_grass)\nground_right.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.5")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(")\nscene.add(ground_right)\ncustomizeShadow(ground_right, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.25")]),s._v(") "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// mess, opacity")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" tree = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("x, z")]),s._v(") ")]),s._v("{\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".x = x\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".z = z\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//trunk")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" material_trunk = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.MeshLambertMaterial({ "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0x9a6169")]),s._v(" })\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" geometry_trunk = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.BoxGeometry("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.15")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.15")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.15")]),s._v(")\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" trunk = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry_trunk, material_trunk)\n  trunk.position.set("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".x, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.275")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".z)\n  trunk.castShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n  trunk.receiveShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n  scene.add(trunk)\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//leaves")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" geometry_leaves = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.BoxGeometry("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.25")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.4")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.25")]),s._v(")\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" material_leaves = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.MeshLambertMaterial({ "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0x65bb61")]),s._v(" })\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" leaves = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry_leaves, material_leaves)\n  leaves.position.set("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".x, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.2")]),s._v(" + "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.15")]),s._v(" + "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.4")]),s._v(" / "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".z)\n  leaves.castShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n  customizeShadow(leaves, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.25")]),s._v(") "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// mess, opacity")]),s._v("\n  scene.add(leaves)\n}\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//left")]),s._v("\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.75")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.85")]),s._v(")\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.75")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.15")]),s._v(")\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.5")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.5")]),s._v(")\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.5")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.4")]),s._v(")\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.25")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.85")]),s._v(")\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1.25")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.75")]),s._v(")\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.75")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.85")]),s._v(")\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.75")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.25")]),s._v(")\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.25")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.85")]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//right")]),s._v("\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.25")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.85")]),s._v(")\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.25")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.75")]),s._v(")\n\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.5")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.5")]),s._v(")\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.75")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.85")]),s._v(")\ntree("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.75")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.35")]),s._v(")\n\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("customizeShadow")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("t, a")]),s._v(") ")]),s._v("{\n  "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//opacity, target mesh")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" material_shadow = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.ShadowMaterial({ "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("opacity")]),s._v(": a })\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" mesh_shadow = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(t.geometry, material_shadow)\n  mesh_shadow.position.set(t.position.x, t.position.y, t.position.z)\n  mesh_shadow.receiveShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n  scene.add(mesh_shadow)\n}\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" material_wood = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.MeshLambertMaterial({ "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0xa98f78")]),s._v(" })\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//bridge - wood block")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v("; i++) {\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" geometry_block = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.BoxGeometry("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.15")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.02")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.4")]),s._v(")\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" block = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry_block, material_wood)\n  block.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(" + "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.2")]),s._v(" * i, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.21")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.2")]),s._v(")\n  block.castShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n  block.receiveShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n  scene.add(block)\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//bridge - rail")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" geometry_rail_v = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.BoxGeometry("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.04")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.3")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.04")]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" rail_1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry_rail_v, material_wood)\nrail_1.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.35")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.4")]),s._v(")\nrail_1.castShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\ncustomizeShadow(rail_1, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.2")]),s._v(")\nscene.add(rail_1)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" rail_2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry_rail_v, material_wood)\nrail_2.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.35")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.4")]),s._v(")\nrail_2.castShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\ncustomizeShadow(rail_2, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.2")]),s._v(")\nscene.add(rail_2)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" rail_3 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry_rail_v, material_wood)\nrail_3.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-0.1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.35")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(")\nrail_3.castShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\ncustomizeShadow(rail_3, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.2")]),s._v(")\nscene.add(rail_3)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" rail_4 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry_rail_v, material_wood)\nrail_4.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.35")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(")\nrail_4.castShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\ncustomizeShadow(rail_4, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.2")]),s._v(")\nscene.add(rail_4)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" geometry_rail_h = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.BoxGeometry("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1.2")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.04")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.04")]),s._v(")\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" rail_h1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry_rail_h, material_wood)\nrail_h1.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.5")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.42")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.4")]),s._v(")\nrail_h1.castShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\ncustomizeShadow(rail_h1, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.2")]),s._v(")\nscene.add(rail_h1)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" rail_h2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh(geometry_rail_h, material_wood)\nrail_h2.position.set("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.5")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.42")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(")\nrail_h2.castShadow = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\ncustomizeShadow(rail_h2, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.2")]),s._v(")\nscene.add(rail_h2)\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" Drop = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".geometry = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.BoxGeometry("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(")\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".drop = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Mesh("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".geometry, material_river)\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".drop.position.set(\n    "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".random("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.9")]),s._v("),\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" + ("),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".random() - "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.5")]),s._v(") * "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v("\n  )\n  scene.add("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".drop)\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".speed = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".lifespan = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".random() * "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("50")]),s._v(" + "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("50")]),s._v("\n\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".update = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".speed += "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.0007")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".lifespan--\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".drop.position.x += ("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.5")]),s._v(" - "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".drop.position.x) / "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("70")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".drop.position.y -= "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".speed\n  }\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" drops = []\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" count = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" render = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n  requestAnimationFrame(render)\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (count % "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(" == "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(") {\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v("; i++) {\n      drops.push("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Drop())\n    }\n  }\n  count++\n  "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < drops.length; i++) {\n    drops[i].update()\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (drops[i].lifespan < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(") {\n      scene.remove(scene.getObjectById(drops[i].drop.id))\n      drops.splice(i, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(")\n    }\n  }\n  renderer.render(scene, camera)\n}\nrender()\n")])])])],1)},[],!1,null,null,null);a.default=t.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{41:function(s,e,n){"use strict";n.r(e);var r={components:{}},a=n(2),t=Object(a.a)(r,function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("section",[n("h1",[s._v("外部模型")]),s._v(" "),n("p",[s._v("THREE.js 创建常见的几何图形是十分方便的。但是业务需求上需要开发的效果使用的模型往往都是十分复杂的，这时候再使用常见几何体进行组合就麻烦了。所以，THREE.js 是支持用户导入由 其他工具（如 3DS MAX）制作的三维模型的。")]),s._v(" "),n("h2",[s._v("1. 支持格式")]),s._v(" "),s._m(0),s._v(" "),s._m(1),s._v(" "),s._m(2),s._v(" "),n("p",[s._v("THREE.js 支持的模型格式有")]),s._v(" "),s._m(3),s._v(" "),n("h2",[s._v("2. 无材质模型")]),s._v(" "),n("block-demo",{attrs:{tip:"",source:"const renderer = new THREE.WebGLRenderer()\nrenderer.setSize(400, 300)\ndocument.querySelector('#app').appendChild(renderer.domElement)\n\nconst scene = new THREE.Scene()\n\nconst camera = new THREE.OrthographicCamera(-10, 10, 8, -8, 0.1, 10)\ncamera.position.set(0, 0, 5)\nscene.add(camera)\n\nconst light = new THREE.DirectionalLight(0xfff000)\nlight.position.set(5, 2, 5)\nscene.add(light)\n\nconst objLoader = new THREE.OBJLoader()\n\nobjLoader.load(\n  `https://dpxr-graph-bed.oss-cn-beijing.aliyuncs.com/port.obj`,\n  obj => {\n    obj.traverse(function(child) {\n      if (child instanceof THREE.Mesh) {\n        child.material.side = THREE.DoubleSide\n      }\n    })\n\n    obj.position.y = -2\n\n    const animate = () => {\n      obj.rotation.y += 0.01\n\n      renderer.render(scene, camera)\n      requestAnimationFrame(animate)\n    }\n\n    scene.add(obj)\n\n    animate()\n  }\n)\n"}},[n("pre",{pre:!0},[n("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" renderer = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.WebGLRenderer()\nrenderer.setSize("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("400")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("300")]),s._v(")\n"),n("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".querySelector("),n("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#app'")]),s._v(").appendChild(renderer.domElement)\n\n"),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" scene = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Scene()\n\n"),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" camera = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.OrthographicCamera("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-10")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-8")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(")\ncamera.position.set("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(")\nscene.add(camera)\n\n"),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" light = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.DirectionalLight("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0xfff000")]),s._v(")\nlight.position.set("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(")\nscene.add(light)\n\n"),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" objLoader = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.OBJLoader()\n\nobjLoader.load(\n  "),n("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`https://dpxr-graph-bed.oss-cn-beijing.aliyuncs.com/port.obj`")]),s._v(",\n  obj => {\n    obj.traverse("),n("span",{pre:!0,attrs:{class:"hljs-function"}},[n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),n("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("child")]),s._v(") ")]),s._v("{\n      "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (child "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("instanceof")]),s._v(" THREE.Mesh) {\n        child.material.side = THREE.DoubleSide\n      }\n    })\n\n    obj.position.y = "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-2")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" animate = "),n("span",{pre:!0,attrs:{class:"hljs-function"}},[n("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" {\n      obj.rotation.y += "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.01")]),s._v("\n\n      renderer.render(scene, camera)\n      requestAnimationFrame(animate)\n    }\n\n    scene.add(obj)\n\n    animate()\n  }\n)\n")])])]),n("h2",[s._v("3. 有材质模型")]),s._v(" "),n("p",[s._v("模型的材质有 2 种定义方式，一种是在代码导入模型后设置材质，另一种是在建模软件中导出材质信息。")]),s._v(" "),n("h3",[s._v("3.1 在代码中设置材质")]),s._v(" "),n("block-demo",{attrs:{tip:"",source:"const renderer = new THREE.WebGLRenderer()\nrenderer.setSize(400, 300)\ndocument.querySelector('#app').appendChild(renderer.domElement)\n\nconst scene = new THREE.Scene()\n\nconst camera = new THREE.OrthographicCamera(-10, 10, 8, -8, 0.1, 10)\ncamera.position.set(0, 0, 5)\nscene.add(camera)\n\nconst light = new THREE.DirectionalLight(0xfff000)\nlight.position.set(5, 2, 5)\nscene.add(light)\n\nconst objLoader = new THREE.OBJLoader()\n\nobjLoader.load(\n  `https://dpxr-graph-bed.oss-cn-beijing.aliyuncs.com/port.obj`,\n  obj => {\n    obj.traverse(function(child) {\n      if (child instanceof THREE.Mesh) {\n        child.material = new THREE.MeshLambertMaterial({\n          color: 0xff000,\n          side: THREE.DoubleSide\n        })\n      }\n    })\n\n    obj.position.y = -2\n\n    const animate = () => {\n      obj.rotation.y += 0.01\n\n      renderer.render(scene, camera)\n      requestAnimationFrame(animate)\n    }\n\n    scene.add(obj)\n\n    animate()\n  }\n)\n"}},[n("pre",{pre:!0},[n("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" renderer = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.WebGLRenderer()\nrenderer.setSize("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("400")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("300")]),s._v(")\n"),n("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".querySelector("),n("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#app'")]),s._v(").appendChild(renderer.domElement)\n\n"),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" scene = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Scene()\n\n"),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" camera = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.OrthographicCamera("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-10")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-8")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(")\ncamera.position.set("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(")\nscene.add(camera)\n\n"),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" light = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.DirectionalLight("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0xfff000")]),s._v(")\nlight.position.set("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(")\nscene.add(light)\n\n"),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" objLoader = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.OBJLoader()\n\nobjLoader.load(\n  "),n("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`https://dpxr-graph-bed.oss-cn-beijing.aliyuncs.com/port.obj`")]),s._v(",\n  obj => {\n    obj.traverse("),n("span",{pre:!0,attrs:{class:"hljs-function"}},[n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),n("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("child")]),s._v(") ")]),s._v("{\n      "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (child "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("instanceof")]),s._v(" THREE.Mesh) {\n        child.material = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.MeshLambertMaterial({\n          "),n("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("color")]),s._v(": "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0xff000")]),s._v(",\n          "),n("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("side")]),s._v(": THREE.DoubleSide\n        })\n      }\n    })\n\n    obj.position.y = "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-2")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" animate = "),n("span",{pre:!0,attrs:{class:"hljs-function"}},[n("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" {\n      obj.rotation.y += "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.01")]),s._v("\n\n      renderer.render(scene, camera)\n      requestAnimationFrame(animate)\n    }\n\n    scene.add(obj)\n\n    animate()\n  }\n)\n")])])]),n("h3",[s._v("3.2 在建模软件中设置材质")]),s._v(" "),s._m(4),s._v(" "),n("block-demo",{attrs:{tip:"",source:"const renderer = new THREE.WebGLRenderer()\nrenderer.setSize(400, 300)\ndocument.querySelector('#app').appendChild(renderer.domElement)\n\nconst scene = new THREE.Scene()\n\nconst camera = new THREE.OrthographicCamera(-10, 10, 8, -8, 0.1, 10)\ncamera.position.set(0, 0, 5)\nscene.add(camera)\n\nconst light = new THREE.DirectionalLight(0xfff000)\nlight.position.set(5, 2, 5)\nscene.add(light)\n\nconst mtlLoader = new THREE.MTLLoader()\nmtlLoader.load(\n  `https://dpxr-graph-bed.oss-cn-beijing.aliyuncs.com/port.mtl`,\n  materials => {\n    materials.preload()\n\n    const objLoader = new THREE.OBJLoader()\n    objLoader.setMaterials(materials)\n\n    objLoader.load(\n      `https://dpxr-graph-bed.oss-cn-beijing.aliyuncs.com/port.obj`,\n      obj => {\n        if (obj.children.length) {\n          obj = obj.children[0]\n\n          const animate = () => {\n            obj.rotation.y += 0.01\n\n            renderer.render(scene, camera)\n            requestAnimationFrame(animate)\n          }\n          obj.position.y = -2\n          scene.add(obj)\n\n          animate()\n        }\n      }\n    )\n  }\n)\n"}},[n("pre",{pre:!0},[n("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" renderer = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.WebGLRenderer()\nrenderer.setSize("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("400")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("300")]),s._v(")\n"),n("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".querySelector("),n("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#app'")]),s._v(").appendChild(renderer.domElement)\n\n"),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" scene = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.Scene()\n\n"),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" camera = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.OrthographicCamera("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-10")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-8")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.1")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(")\ncamera.position.set("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(")\nscene.add(camera)\n\n"),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" light = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.DirectionalLight("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0xfff000")]),s._v(")\nlight.position.set("),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(")\nscene.add(light)\n\n"),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" mtlLoader = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.MTLLoader()\nmtlLoader.load(\n  "),n("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`https://dpxr-graph-bed.oss-cn-beijing.aliyuncs.com/port.mtl`")]),s._v(",\n  materials => {\n    materials.preload()\n\n    "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" objLoader = "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" THREE.OBJLoader()\n    objLoader.setMaterials(materials)\n\n    objLoader.load(\n      "),n("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`https://dpxr-graph-bed.oss-cn-beijing.aliyuncs.com/port.obj`")]),s._v(",\n      obj => {\n        "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (obj.children.length) {\n          obj = obj.children["),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("]\n\n          "),n("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" animate = "),n("span",{pre:!0,attrs:{class:"hljs-function"}},[n("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" {\n            obj.rotation.y += "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0.01")]),s._v("\n\n            renderer.render(scene, camera)\n            requestAnimationFrame(animate)\n          }\n          obj.position.y = "),n("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-2")]),s._v("\n          scene.add(obj)\n\n          animate()\n        }\n      }\n    )\n  }\n)\n")])])])],1)},[function(){var s=this.$createElement,e=this._self._c||s;return e("p",[this._v("THREE.js 有一系列 "),e("code",{pre:!0},[this._v("loader")]),this._v(" 来加载不同格式的模型文件。如：")])},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ul",[n("li",[n("code",{pre:!0},[s._v("*.obj")]),s._v(": 使用 "),n("code",{pre:!0},[s._v("OBJLoader")]),s._v(" 导入 "),n("code",{pre:!0},[s._v(".obj")]),s._v(" 模型文件")]),s._v(" "),n("li",[n("code",{pre:!0},[s._v("*.mtl")]),s._v(": 使用 "),n("code",{pre:!0},[s._v("MTLLoader")]),s._v(" 和 "),n("code",{pre:!0},[s._v("OBJMTLLoader")]),s._v(" 导入 "),n("code",{pre:!0},[s._v(".obj")]),s._v(" 模型文件")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",[this._v("此外，还有 "),e("code",{pre:!0},[this._v("PLYLoader")]),this._v(" 、"),e("code",{pre:!0},[this._v("STLLoader")]),this._v(" 等对应不同格式的加载器。")])},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ul",[n("li",[n("code",{pre:!0},[s._v(".obj")])]),s._v(" "),n("li",[n("code",{pre:!0},[s._v(".mtl")])]),s._v(" "),n("li",[n("code",{pre:!0},[s._v(".dae")])]),s._v(" "),n("li",[n("code",{pre:!0},[s._v(".ctm")])]),s._v(" "),n("li",[n("code",{pre:!0},[s._v(".ply")])]),s._v(" "),n("li",[n("code",{pre:!0},[s._v(".stl")])]),s._v(" "),n("li",[n("code",{pre:!0},[s._v(".wrl")])]),s._v(" "),n("li",[n("code",{pre:!0},[s._v(".vtk")])])])},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("p",[s._v("在建模软件中导出 "),n("code",{pre:!0},[s._v(".obj")]),s._v(" 模型文件 和 "),n("code",{pre:!0},[s._v(".mtl")]),s._v(" 材质文件后使用 "),n("code",{pre:!0},[s._v("OBJLoader")]),s._v(" 和 "),n("code",{pre:!0},[s._v("MTLLoader")]),s._v(" 加载相应文件即可。")])}],!1,null,null,null);e.default=t.exports}}]);